<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>HTML Home Page</title>

    <link href="Content/twitter-bootstrap/less/bootstrap.less" rel="stylesheet" type="text/css" />
    <script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="Scripts/moment.js" type="text/javascript"></script>
    <script src="Scripts/moment.i18n/es.js" type="text/javascript"></script>
    <script src="Content/twitter-bootstrap/js/bootstrap-collapse.js" type="text/javascript"></script>

    <script src="Scripts/knockout-2.2.0.js" type="text/javascript"></script>
    <script src="Scripts/underscore.js" type="text/javascript"></script>
    <script src="Scripts/moment-datepicker.js" type="text/javascript"></script>
    <link href="Content/moment-datepicker/datepicker.css" rel="stylesheet" type="text/css" />
    <script src="Scripts/moment-datepicker-ko.js" type="text/javascript"></script>

    <link href="Content/site.css" rel="stylesheet" type="text/css" />
    <script src="Scripts/site.js" type="text/javascript"></script>
    <script src="Scripts/CommonFood.js" type="text/javascript"></script>
    <script src="Scripts/admin.js" type="text/javascript"></script>
</head>
<body class="bootstrap-scope">
    <div>
        <div class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <ul class="nav">
                    <li><a href="./">Home</a></li>
                    <li class="active"><a href="admin.html">Definir menú</a></li>
                    <li><a href="mymenu.html">Mi menú</a></li>
                </ul>
            </div>
        </div>
        <header class="jumbotron subhead" id="overview" style="padding: 40px 0;">
          <div class="container">
            <h1>Definir menú</h1>
          </div>
        </header>
        <div class="container">
            <section class="persistence well">
                <h2>Persistencia</h2>
                <div>
                    <button class="btn" data-bind="click: load">Leer desde JSON</button>
                    <button class="btn" data-bind="click: save">Escribir en JSON</button>
                    <div class="btn-group" data-toggle="buttons-checkbox">
                        <a class="btn" data-toggle="collapse" href="#collapseData">Mostrar JSON</a>
                    </div>
                </div>
                <div id="collapseData" class="collapse">
                    <textarea class="json-field">
{
  "title":"Menú primaveral",
  "firstWeek":0,
  "weeksQuantity":5,
  "startDate":"2012-09-21T00:00:00",
  "endDate":"2020-01-01T00:00:00",
  "places":[
    { "key":"place_larioja", "text":"La Rioja" },
    { "key":"place_garay", "text":"Garay" }
  ],
  "options":[
    { "key":"menu_comun", "text":"Común" },
    { "key":"menu_light", "text":"Light" },
    { "key":"menu_vegetariano", "text":"Vegetariano" }
  ],
  "foods":[
    { "week":0, "day":1, "option":"menu_comun", "food":"Cuarto de pollo deshuesado al champignonge c/papas" },
    { "week":0, "day":1, "option":"menu_light", "food":"Wok de vegetales y atun al natural" },
    { "week":0, "day":1, "option":"menu_vegetariano", "food":"Cintas caseras de rucula c/wok de hongos  y salsa de soja" },
    { "week":0, "day":2, "option":"menu_comun", "food":"Albondigas a la portuguesa c/pure de papas" },
    { "week":0, "day":2, "option":"menu_light", "food":"Ensalada de rucula,champig frescos,remolacha y huevo" },
    { "week":0, "day":2, "option":"menu_vegetariano", "food":"Fajitas Mexicanas veg c/ batatas al horno" },
    { "week":0, "day":3, "option":"menu_comun", "food":"Ravioles de pollo,puerro y muzarella c/ salsa mixta" },
    { "week":0, "day":3, "option":"menu_light", "food":"Milanesas de soja c/puré de calabaza y zanahoria" },
    { "week":0, "day":3, "option":"menu_vegetariano", "food":"Brusquetas de verduras gratinadas,aceitunas,tomates y espinaca" },
    { "week":0, "day":4, "option":"menu_comun", "food":"Milanesa a la suiza c/papas y cebollas al horno" },
    { "week":0, "day":4, "option":"menu_light", "food":"Pechuga sin piel al puerro c/vegetales grillados" },
    { "week":0, "day":4, "option":"menu_vegetariano", "food":"Sorrentinos de calabaza y muzzarella c/salsa mixta" },
    { "week":0, "day":5, "option":"menu_comun", "food":"Filet de merluza al roquefort c/papas al natural" },
    { "week":0, "day":5, "option":"menu_light", "food":"Ñoquis de ricota,salsa de tomates frescos y albahaca" },
    { "week":0, "day":5, "option":"menu_vegetariano", "food":"Pizza individual de espinaca y muzzarella" },
    { "week":1, "day":1, "option":"menu_comun", "food":"Sorrentinos jamon y quso c/salsa scarparo" },
    { "week":1, "day":1, "option":"menu_light", "food":"Ensalada roja de tomate,remolacha,zanahoria,repollo colorado y atun al natural" },
    { "week":1, "day":1, "option":"menu_vegetariano", "food":"Milanesa de berenjena a la napolitana c/puré mixto" },
    { "week":1, "day":2, "option":"menu_comun", "food":"Cuarto de pollo al verdeo c/papas" },
    { "week":1, "day":2, "option":"menu_light", "food":"Brusquetas de verduras grilladas,tomates y albahaca en pan integral y semillas" },
    { "week":1, "day":2, "option":"menu_vegetariano", "food":"Wok de vegetales hongos,brotes,semillas y salsa de soja" },
    { "week":1, "day":3, "option":"menu_comun", "food":"Milanesa napolitana c/puré mixto" },
    { "week":1, "day":3, "option":"menu_light", "food":"Pollo a la mostaza c/arroz integral" },
    { "week":1, "day":3, "option":"menu_vegetariano", "food":"Ñoquis de espicas y papas c/ salsa de puerro y tomates frescos" },
    { "week":1, "day":4, "option":"menu_comun", "food":"Merluza horneada caprese c/puré de papas y espinacas" },
    { "week":1, "day":4, "option":"menu_light", "food":"Risotto Integral de Verduras y espinaca" },
    { "week":1, "day":4, "option":"menu_vegetariano", "food":"Ensalada de verdes,huevos duros,parmesano,croutons y aderezos Cesar" },
    { "week":1, "day":5, "option":"menu_comun", "food":"Fajitas Mixtas c/papas provenzal" },
    { "week":1, "day":5, "option":"menu_light", "food":"Ravioles de ricota en masa integral c/salsa de verduras y tomates frescos" },
    { "week":1, "day":5, "option":"menu_vegetariano", "food":"Calzone de muzzarella,tomates,albahaca y muzzarella" },
    { "week":2, "day":1, "option":"menu_comun", "food":"Canelones de ricota y verduras a la bolognesa" },
    { "week":2, "day":1, "option":"menu_light", "food":"Pollo al puerro acompañado c/verduras asadas" },
    { "week":2, "day":1, "option":"menu_vegetariano", "food":"Milanesas de soja a la napolitana c/puré mixto" },
    { "week":2, "day":2, "option":"menu_comun", "food":"Arroz c/calamares" },
    { "week":2, "day":2, "option":"menu_light", "food":"Ensalada de hojas verdes, champignones, verdeo, claras de huevo grilladas y semillas" },
    { "week":2, "day":2, "option":"menu_vegetariano", "food":"Ñoquis de papa y espinaca c/salsa roquefort" },
    { "week":2, "day":3, "option":"menu_comun", "food":"Muslo relleno c/ jamon y queso y verduras asadas" },
    { "week":2, "day":3, "option":"menu_light", "food":"Niños envueltos c/puré de calabaza y hierbas" },
    { "week":2, "day":3, "option":"menu_vegetariano", "food":"Calabaza asada c/queso gratinado,choclo y puerro" },
    { "week":2, "day":4, "option":"menu_comun", "food":"Pizza individual napolitana c/jamon y aceitunas" },
    { "week":2, "day":4, "option":"menu_light", "food":"Merluza horneada al limon y hierbas c/calabaza asada" },
    { "week":2, "day":4, "option":"menu_vegetariano", "food":"Ensalada de hojas verdes,tomates,muzzarella,aceitunas negras y verdeo" },
    { "week":2, "day":5, "option":"menu_comun", "food":"Carne asada al horno con papas a las hierbas" },
    { "week":2, "day":5, "option":"menu_light", "food":"Wok de vegetales, brotes, hongos y semillas." },
    { "week":2, "day":5, "option":"menu_vegetariano", "food":"Ravioles de espinaca y parmesano c/salsa rosa" },
    { "week":3, "day":1, "option":"menu_comun", "food":"Pollo al verdeo c/calabaza asada" },
    { "week":3, "day":1, "option":"menu_light", "food":"Roulete integral de vegetales,brotes y semillas" },
    { "week":3, "day":1, "option":"menu_vegetariano", "food":"Milanesa de zapallitos c/muzzarella.tomate y albahaca" },
    { "week":3, "day":2, "option":"menu_comun", "food":"Lasagna a la bolognesa" },
    { "week":3, "day":2, "option":"menu_light", "food":"Ensalada de verdes c/pollo y citronete" },
    { "week":3, "day":2, "option":"menu_vegetariano", "food":"Pizza individual de muzzarella y vegetales gratinados c/pan casero" },
    { "week":3, "day":3, "option":"menu_comun", "food":"Fajitas mexicanas de ternera c/papas y batatas" },
    { "week":3, "day":3, "option":"menu_light", "food":"Ensalada de hojas verdes, atún al natural tomates y zanahoria" },
    { "week":3, "day":3, "option":"menu_vegetariano", "food":"Sorrentinos de vegetales grillados y ricota c/salsa de puerro y tomates" },
    { "week":3, "day":4, "option":"menu_comun", "food":"Suprema napolitana c/puré de papas y calabaza" },
    { "week":3, "day":4, "option":"menu_light", "food":"Pan de carne y vegetales al wok" },
    { "week":3, "day":4, "option":"menu_vegetariano", "food":"Ensalada caprese c/aceitunas negras y rucula" },
    { "week":3, "day":5, "option":"menu_comun", "food":"Matambre a la Pizza con Papas al orégano" },
    { "week":3, "day":5, "option":"menu_light", "food":"Omelete de claras,espinacas y calabaza asada c/pan integral" },
    { "week":3, "day":5, "option":"menu_vegetariano", "food":"Ñoquis de calabaza c/salsa de tomates y espinacas" },
    { "week":4, "day":1, "option":"menu_comun", "food":"Calzon especial c/jamon,morrones y muzzarella" },
    { "week":4, "day":1, "option":"menu_light", "food":"Wok de vegetales,pollo y semillas" },
    { "week":4, "day":1, "option":"menu_vegetariano", "food":"Milhojas de verdura,queso y muzzarella" },
    { "week":4, "day":2, "option":"menu_comun", "food":"Pastel de carne y papas con queso gratinado" },
    { "week":4, "day":2, "option":"menu_light", "food":"Pesca del día horneada al limon y hierbas c/calabaza asada" },
    { "week":4, "day":2, "option":"menu_vegetariano", "food":"Sorrentinos Caprese c/salsa de quesos" },
    { "week":4, "day":3, "option":"menu_comun", "food":"Milanesa con arroz a la crema" },
    { "week":4, "day":3, "option":"menu_light", "food":"Ensalada de espinacas frescas,champignones,semillas,verdeo y claras de huevo grilladas" },
    { "week":4, "day":3, "option":"menu_vegetariano", "food":"Pizza individual de muzzarella,rucula y parmesano y aceitunas negras" },
    { "week":4, "day":4, "option":"menu_comun", "food":"Fajitas mexicanas de pollo c/papas a la hierba" },
    { "week":4, "day":4, "option":"menu_light", "food":"Pollo al puerro c/verduras asadas" },
    { "week":4, "day":4, "option":"menu_vegetariano", "food":"Quesadillas mexicanas,c/queso y cebolla" },
    { "week":4, "day":5, "option":"menu_comun", "food":"Suprema a la milanesa c/puré de papas" },
    { "week":4, "day":5, "option":"menu_light", "food":"Pizza integral,c/verduras grilladas y salsa de tomates frescos" },
    { "week":4, "day":5, "option":"menu_vegetariano", "food":"Lasagna de ricota,vegetales,espinacas y salsa mixta gratinada" }
  ]
}
                    </textarea>
                </div>
            </section>
            <section class="configuration well">
                <h2>Configuración</h2>
                <div class="btn-group" data-toggle="buttons-checkbox">
                    <a class="btn" data-toggle="collapse" href="#collapseCfg">Mostrar Configuración</a>
                </div>
                <div id="collapseCfg" class="collapse">
                    <form class="form-horizontal">
                        <div class="control-group">
                            <label class="control-label" for="title">Título:</label>
                            <div class="controls">
                                <input type="text" class="span4" data-bind="value: title" id="title" placeholder="Título"/>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="startDate">Comienza:</label>
                            <div class="controls">
                                <input type="text" class="span2" data-bind="datepicker: startDate, datepickerOptions: { dataType: 'iso' }" id="startDate" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="endDate">Finaliza:</label>
                            <div class="controls">
                                <input type="text" class="span2" data-bind="datepicker: endDate, datepickerOptions: { dataType: 'iso' }" id="endDate" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="deadlineTime">Editable hasta:</label>
                            <div class="controls">
                                <div class="input-append">
                                    <input type="text" class="span1" id="deadlineTime" data-bind="time: deadlineTime" />
                                    <span class="add-on"><i class="icon-time"></i></span>
                                </div>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="firstWeek">Primer semana:</label>
                            <div class="controls">
                                <select data-bind="options: weeks, 
                                    optionsText: 'text', optionsValue: 'key', 
                                    value: firstWeek">
                                </select>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="weeksQuantity">Semanas:</label>
                            <div class="controls">
                                <div class="input-append">
                                    <input type="text" class="span1 uneditable-input" readonly="readonly" id="weeksQuantity" data-bind='value: weeksQuantity' />
                                    <button class="btn" type="button" data-bind="click: removeWeek"><i class="icon-minus"></i></button>
                                    <button class="btn" type="button" data-bind="click: addWeek"><i class="icon-plus"></i></button>
                                </div>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">Opciones:</label>
                            <div class="controls">
                                <!-- ko foreach: options -->
                                    <div class="input-append">
                                        <input type="text" class="span2" data-bind='value: text' />
                                        <button class="btn" type="button" data-bind="click: $root.removeOption"><i class="icon-remove"></i></button>
                                    </div>
                                <!-- /ko -->
                                <button class="btn" type="button" data-bind="click: addOption"><i class="icon-plus"></i></button>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">Lugares:</label>
                            <div class="controls">
                                <!-- ko foreach: places -->
                                    <div class="input-append">
                                        <input type="text" class="span2" data-bind='value: text' />
                                        <button class="btn" type="button" data-bind="click: $root.addPlace"><i class="icon-remove"></i></button>
                                    </div>
                                <!-- /ko -->
                                <button class="btn" type="button" data-bind="click: addPlace"><i class="icon-plus"></i></button>
                            </div>
                        </div>
                    </form>
                </div>
            </section>
            <section id="main" >
                <h2 data-bind="text: title">Common Food</h2>
                <div data-bind="foreach: $root.weeks">
                    <h4 data-bind='text: text'></h4>
                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <td></td>
                                <!-- ko foreach: CommonFood.days() -->
                                <td data-bind="text: CommonFood.days.getName($data)"></td>
                                <!-- /ko -->
                            </tr>
                        </thead>
                        <tbody data-bind="foreach: $root.options">
                            <tr>
                                <td data-bind='text: text'></td>
                                <!-- ko foreach: CommonFood.days() -->
                                <td>
                                    <textarea rows="3" data-bind='value: $root.getFood($parentContext.$parent.key, $data, $parent.key)'></textarea>
                                </td>
                                <!-- /ko -->
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
        <footer>
        </footer>
    </div>
</body>
</html>
